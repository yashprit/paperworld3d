<project name="hellopaperworld-singleplayer" default="all" basedir=".">

	<property file="build.properties" />
	<property file="${core.flash.lib}/build/build.properties" />
		
	<target name="all" depends="prepare-libs">
	</target>
	
	<target name="prepare-libs">
		<prepare-paperworld-lib name="core"/>
		<prepare-paperworld-lib name="util"/>
		<prepare-paperworld-lib name="ai"/>
		<prepare-paperworld-lib name="pv3d-core"/>
		
		<prepare-external-lib name="Papervision3D"/>
		
		<copy file="${core.flash.lib}/bin/${bootstrapper.lib.name}.swc" toFile="../lib/${bootstrapper.lib.base.name}.swc"/>

	</target>
	
	<macrodef name="prepare-paperworld-lib">
		<attribute name="name"/>
		<sequential>
			<prepare-lib lib="bin" nameIn="${@{name}.lib.name}" nameOut="${@{name}.lib.base.name}"/>
		</sequential>
	</macrodef>
	
	<macrodef name="prepare-external-lib">
		<attribute name="name"/>
		<sequential>
			<prepare-lib lib="lib" nameIn="@{name}" nameOut="@{name}" />
		</sequential>
	</macrodef>
	
	<macrodef name="prepare-lib">
		<attribute name="lib"/>
		<attribute name="nameIn"/>
		<attribute name="nameOut"/>
		<sequential>
			<unzip src="${core.flash.lib}/@{lib}/@{nameIn}.swc" dest="../bin-debug/lib">
				<patternset>
					<include name="**/*.swf"/>
				</patternset>
				<mapper type="glob" from="library.swf" to="@{nameOut}.swf"/>
			</unzip>
		</sequential>
	</macrodef>
	
</project>
